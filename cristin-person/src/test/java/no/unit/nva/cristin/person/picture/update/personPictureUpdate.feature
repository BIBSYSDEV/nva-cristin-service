Feature: API tests for Cristin Person Picture Update

  Background:
    * def domainName = java.lang.System.getenv('DOMAIN_NAME')
    * def basePath = java.lang.System.getenv('BASE_PATH')
    * def CRISTIN_BASE =  'https://' + domainName +'/' + basePath
    * def username = java.lang.System.getenv('ADMIN_TESTUSER_ID')
    * def password = java.lang.System.getenv('ADMIN_TESTUSER_PASSWORD')
    * def cognitoClientAppId = java.lang.System.getenv('COGNITO_CLIENT_APP_ID')
    * def cognitoUserpoolId = java.lang.System.getenv('COGNITO_USER_POOL_ID')
    * def tokenGenerator = Java.type('no.unit.nva.utils.CognitoUtil')
    * def token = tokenGenerator.loginUser(username, password, cognitoClientAppId)
    * def personIdentifier = '1862303'
    * def anotherPersonIdentifier = '1100259'
    Given url CRISTIN_BASE
    * print 'Current base url: ' + CRISTIN_BASE

  Scenario: Update returns status 403 Forbidden when trying to update another person's picture
    Given path '/person/' + anotherPersonIdentifier + '/picture/'
    * header Authorization = 'Bearer ' + token
    When method PUT
    Then status 403
    And match response.detail == 'Forbidden'

  Scenario: Update returns status 401 Unauthorized when missing token
    Given path '/person/' + personIdentifier + '/picture/'
    When method PUT
    Then status 401
    And match response.message == 'Unauthorized'

  Scenario: Update returns status 204 when updating themselves, payload is valid and payload is picture
    Given path '/person/' + personIdentifier + '/picture/'
    * header Authorization = 'Bearer ' + token
    * def validRequest =
    """
    {
      'base64Data': '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'
    }
    """
    And request validRequest
    When method PUT
    Then status 204

  Scenario: Update returns status 204 when deleting their own picture
    Given path '/person/' + personIdentifier + '/picture/'
    * header Authorization = 'Bearer ' + token
    * def validRequest =
    """
    {
      'base64Data': ''
    }
    """
    And request validRequest
    When method PUT
    Then status 204

  Scenario: Update returns status 400 when payload not a picture
    Given path '/person/' + personIdentifier + '/picture/'
    * header Authorization = 'Bearer ' + token
    * def validRequest =
    """
    {
      'base64Data': 'not a picture'
    }
    """
    And request validRequest
    When method PUT
    Then status 400
    And match response.detail == 'Binary data is not an image'
