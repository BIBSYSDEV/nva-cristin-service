
dependencies {
    implementation project(":cristin-commons")
    implementation libs.nva.json
    implementation libs.nva.core
    implementation libs.junit.jupiter.api
    implementation libs.nva.testutils
    implementation libs.nva.language
    implementation libs.aws.sdk2.core
    implementation libs.aws.sdk2.cognitoidp
    implementation libs.google.guava
    implementation libs.aws.lambda.java.core

    testImplementation libs.karate.core
    testImplementation libs.karate.junit5

    testImplementation project(":cristin-testing")
}


tasks.named('test') {
    useJUnitPlatform {
        excludeTags 'karateTest'
    }
    failFast = true
    testLogging {
        events 'skipped', 'passed', 'failed'
    }
    finalizedBy jacocoTestReport
    environment "COGNITO_URI", "https://example.cognito.org"
    environment "CRISTIN_BOT_FILTER_BYPASS_HEADER_NAME", "Hello"
    environment "CRISTIN_BOT_FILTER_BYPASS_HEADER_VALUE", "World"
}

sourceSets {
    test {
        resources {
            srcDir file('src/test/java')
            exclude '**/*.java'
        }
    }
}

